improve_detroit:
  slug: improve_detroit
  name: Improve Detroit
  category: improvedetroit
  source:
    type: socrata
    url: j7tb-epek
    params:
      $select: location, address, ticket_closed_date_time, ticket_created_date_time, ticket_status, issue_type
      $limit: 10000
      $order: ticket_created_date_time desc
  layers:
    - name: Tree Issue
      type: symbol
      filter: ["==", "issue_type", "Tree Issue"]
      layout:
        visibility: none
        icon-image: improve-tree
        icon-size:
          stops:
            - [9, 0.1]
            - [15, 0.75]
            - [19, 2]
        icon-allow-overlap: true
      paint:
        icon-opacity:
          stops:
            - [9, 0.2]
            - [15, 0.5]
            - [19, 1]
    - name: Blocked Catch Basin
      type: symbol
      filter: ["==", "issue_type", "Blocked Catch Basin"]
      layout:
        visibility: none
        icon-image: improve-catchbasin
        icon-size:
          stops:
            - [9, 0.1]
            - [15, 0.75]
            - [19, 2]
        icon-allow-overlap: true
      paint:
        icon-opacity:
          stops:
            - [9, 0.2]
            - [15, 0.5]
            - [19, 1]
    - name: Illegal Dumping
      type: symbol
      filter: ["==", "issue_type", "Illegal Dumping / Illegal Dump Sites"]
      layout:
        visibility: none
        icon-image: improve-dumping
        icon-size:
          stops:
            - [9, 0.1]
            - [15, 0.75]
            - [19, 2]
        icon-allow-overlap: true
      paint:
        icon-opacity:
          stops:
            - [9, 0.2]
            - [15, 0.5]
            - [19, 1]
  popup:
    title: Improve Detroit Issue
    columns:
      - field: address
        type: text
        name: Address
      - field: issue_type
        type: text
        name: Issue Type
      - field: ticket_created_date_time
        type: date
        name: Ticket Open Time
      - field: ticket_closed_date_time
        type: date
        name: Ticket Close Time