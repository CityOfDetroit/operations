improve_detroit:
  slug: improve_detroit
  name: Improve Detroit
  category: improvedetroit
  source:
    type: socrata
    url: j7tb-epek
    params:
      $select: location, address, ticket_closed_date_time, ticket_created_date_time, ticket_status, issue_type
      $limit: 10000
      $order: ticket_created_date_time desc
  layers:
    - name: Tree Issue
      type: symbol
      filter: ["==", "issue_type", "Tree Issue"]
      layout:
        visibility: none
        icon-image: improve-tree
        icon-size:
          stops:
            - [9, 0.5]
            - [15, 1.75]
            - [19, 3]
        icon-allow-overlap: true
      paint:
        icon-opacity:
          stops:
            - [9, 0.2]
            - [19, 1]
    - name: Blocked Catch Basin
      type: symbol
      filter: ["==", "issue_type", "Blocked Catch Basin"]
      layout:
        visibility: none
        icon-image: improve-catchbasin
        icon-size:
          stops:
            - [9, 0.5]
            - [15, 1.75]
            - [19, 3]
        icon-allow-overlap: true
      paint:
        icon-opacity:
          stops:
            - [9, 0.2]
            - [19, 1]
    - name: Illegal Dumping
      type: symbol
      filter: ["in", "issue_type", "Illegal Dumping", "Illegal Dump Sites"]
      layout:
        visibility: none
        icon-image: improve-dumping
        icon-size:
          stops:
            - [9, 0.5]
            - [15, 1.75]
            - [19, 3]
        icon-allow-overlap: true
      paint:
        icon-opacity:
          stops:
            - [9, 0.2]
            - [19, 1]
  popup:
    title: Improve Detroit Issue
    columns:
      - field: address
        type: text
        name: Address
      - field: issue_type
        type: text
        name: Issue Type
      - field: ticket_created_date_time
        type: date
        name: Ticket Open Time
      - field: ticket_closed_date_time
        type: date
        name: Ticket Close Time
greenlight:
  slug: greenlight
  name: Project Greenlight
  category: greenlight
  source:
    type: esri
    url: https://services2.arcgis.com/qvkbeam7Wirps6zC/ArcGIS/rest/services/ProjectGreenlight/FeatureServer/0
    params:
      outFields: '*'
      outSR: 4326
      where: 1=1
      f: geojson
  layers:
    - name: Active Location
      type: symbol
      filter: ["==", "Status", "Green"]
      layout:
        visibility: none
        icon-image: greenlight-active
        icon-size:
          stops:
            - [9, 0.5]
            - [15, 1.75]
            - [19, 3]
        icon-allow-overlap: true
      paint:
        icon-opacity:
          stops:
            - [9, 0.2]
            - [19, 1]
  popup:
    title: Greenlight Location
    columns:
      - field: Address
        type: text
        name: Address
      - field: Corporate_Entity
        type: text
        name: Business Name